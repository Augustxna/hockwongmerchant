<ion-content style="--background: #f7f9fd">

  <div
    style="position:fixed;top:0;left:0;height:50px;display:flex;align-items:center;z-index: 1002;width: 100vw;background:transparent;justify-content: space-between;">
    <div
      style='margin-left:15px;height:25px;width:25px;display:flex;justify-content: center;align-items: center;border-radius:100%;background-color: rgba(0,0,0,0.3);'>
      <ion-icon (click)='back()' style='color:white;font-size:20px;margin-right:3px;' name="chevron-back-outline">
      </ion-icon>
    </div>
  </div>

  <div
    style=" padding: 15px; padding-top:60px; position: sticky; top: 0px; z-index: 1000; background-color: #f7f9fd;padding-bottom:5px;">
    <div style='font-size:16px;color:#333333;font-weight: bold;margin-bottom: 0px;'>{{language['Product list'][lang]}}
    </div>

    <div
      style="border-radius: 10px; background-color: white; display: flex; align-items: center;padding: 7px 10px; margin-top: 15px;">
      <ion-icon style="font-size: 20px; color: rgba(0,0,0,0.5);" name="search-outline"></ion-icon>
      <ion-input class="ion-no-padding" [(ngModel)]="keyword"
        style="color: rgba(0,0,0,0.5); margin-left: 10px; font-size: 14px;" placeholder='Search Something'>
      </ion-input>
    </div>

    <div style='width:100%;display:flex;padding-top:15px; overflow-x: auto; '>
      <div (click)='newcat()' style='background-color: #999999;
      color:white;
      min-width:max-content;padding:7px 15px;font-size:12px;
      margin-right:10px;margin-bottom:10px;border-radius:3px;cursor: pointer;'>+{{language['New Category'][lang]}}
      </div>
      <div [ngClass]='[ selected=="All" ? "high" : "highx" ]' (click)='selected="All";selectedno=-1'>
        {{language['All'][lang]}}</div>
      <div [ngClass]='[ selected==eve  ? "high" : "highx" ]' (click)='selected=eve;selectedno=i'
        style="min-width: max-content;" *ngFor='let eve of category; let i = index'>{{eve}}</div>

    </div>

  </div>

  <div style="padding: 0px 15px 15px 15px;">

    <div (click)='selected!="All" ? updcat(selected):""'
      style='width:100%;font-size:12px;color:#193fbb;text-align: right;margin-bottom:5px;'>{{selected!="All" ?
      language['Edit Category'][lang] : ""}}</div>

    <div *ngFor="let x of search(products)" (click)="detail(x)"
      style="background: white; border-radius: 10px;  margin-bottom: 15px; display: flex; align-items: center;">

      <!-- <img
        style="width: 80px; height: 80px; border-radius: 15px; padding: 10px; object-fit: cover; object-position: center;"
        src="{{x.photo[0] || ''}}"> -->

      <div style="padding: 15px;">



        <div style="margin-bottom: 7.5px; font-weight: 500; font-size: 14px; letter-spacing: 0.8px; display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;">{{x.name}}</div>
        <div style="font-size: 14px; font-weight: bold; color: #193fbb;">{{x.price | currency:"RM"}}<span
            style='color:#999999;font-size:12px;font-weight: normal;'>({{x.qty || 0}}&nbsp;units
            left)</span>
        </div>

      </div>

    </div>

    <div *ngIf="lengthof(search(products)) == 0 "
      style="height: calc( 100vh - 196px - 15px); width: 100vw; display: flex; align-items: center; justify-content: center;">
      <img src="assets/no content.png" alt="">
    </div>

  </div>

  <ion-fab horizontal="end" vertical="bottom" slot="fixed">
    <ion-fab-button color="light">
      <ion-icon md="caret-back" ios="chevron-back-circle-outline"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="start">
      <ion-fab-button (click)="create()" color="light">
        <ion-icon style="color: black;" name="add-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button (click)="dl_user()" color="light">
        <ion-icon style="color: black;" name="archive-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button (click)="bulkupload()" color="light">
        <ion-icon style="color: black;" name="document-text-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>

</ion-content>
